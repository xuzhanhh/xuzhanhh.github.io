{"expireTime":9007200800130146000,"key":"transformer-remark-markdown-html-ast-450065926f01d2a06769136f5c582d98-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"react 16.7","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":13,"offset":12}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":13,"offset":12}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"React DOM","position":{"start":{"line":3,"column":4,"offset":17},"end":{"line":3,"column":13,"offset":26}}}],"position":{"start":{"line":3,"column":1,"offset":14},"end":{"line":3,"column":13,"offset":26}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"1. Fix performance of ","position":{"start":{"line":5,"column":5,"offset":32},"end":{"line":5,"column":27,"offset":54}}},{"type":"raw","value":"<code class=\"language-text\">React.lazy</code>","position":{"start":{"line":5,"column":27,"offset":54},"end":{"line":5,"column":39,"offset":66}}},{"type":"text","value":" for large numbers of lazily-loaded components. (","position":{"start":{"line":5,"column":39,"offset":66},"end":{"line":5,"column":88,"offset":115}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/acdlite"},"children":[{"type":"text","value":"@acdlite","position":{"start":{"line":5,"column":89,"offset":116},"end":{"line":5,"column":97,"offset":124}}}],"position":{"start":{"line":5,"column":88,"offset":115},"end":{"line":5,"column":126,"offset":153}}},{"type":"text","value":" in ","position":{"start":{"line":5,"column":126,"offset":153},"end":{"line":5,"column":130,"offset":157}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14429"},"children":[{"type":"text","value":"#14429","position":{"start":{"line":5,"column":131,"offset":158},"end":{"line":5,"column":137,"offset":164}}}],"position":{"start":{"line":5,"column":130,"offset":157},"end":{"line":5,"column":184,"offset":211}}},{"type":"text","value":")","position":{"start":{"line":5,"column":184,"offset":211},"end":{"line":5,"column":185,"offset":212}}}],"position":{"start":{"line":5,"column":1,"offset":28},"end":{"line":5,"column":186,"offset":213}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2. Clear fields on unmount to avoid memory leaks. (","position":{"start":{"line":7,"column":5,"offset":219},"end":{"line":7,"column":56,"offset":270}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/trueadm"},"children":[{"type":"text","value":"@trueadm","position":{"start":{"line":7,"column":57,"offset":271},"end":{"line":7,"column":65,"offset":279}}}],"position":{"start":{"line":7,"column":56,"offset":270},"end":{"line":7,"column":94,"offset":308}}},{"type":"text","value":" in ","position":{"start":{"line":7,"column":94,"offset":308},"end":{"line":7,"column":98,"offset":312}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14276"},"children":[{"type":"text","value":"#14276","position":{"start":{"line":7,"column":99,"offset":313},"end":{"line":7,"column":105,"offset":319}}}],"position":{"start":{"line":7,"column":98,"offset":312},"end":{"line":7,"column":152,"offset":366}}},{"type":"text","value":")","position":{"start":{"line":7,"column":152,"offset":366},"end":{"line":7,"column":153,"offset":367}}}],"position":{"start":{"line":7,"column":1,"offset":215},"end":{"line":7,"column":154,"offset":368}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"3. Fix bug with SSR and context when mixing ","position":{"start":{"line":9,"column":5,"offset":374},"end":{"line":9,"column":49,"offset":418}}},{"type":"raw","value":"<code class=\"language-text\">react-dom/server@16.6</code>","position":{"start":{"line":9,"column":49,"offset":418},"end":{"line":9,"column":72,"offset":441}}},{"type":"text","value":" and ","position":{"start":{"line":9,"column":72,"offset":441},"end":{"line":9,"column":77,"offset":446}}},{"type":"raw","value":"<code class=\"language-text\">react@&lt;16.6</code>","position":{"start":{"line":9,"column":77,"offset":446},"end":{"line":9,"column":90,"offset":459}}},{"type":"text","value":". (","position":{"start":{"line":9,"column":90,"offset":459},"end":{"line":9,"column":93,"offset":462}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/gaearon"},"children":[{"type":"text","value":"@gaearon","position":{"start":{"line":9,"column":94,"offset":463},"end":{"line":9,"column":102,"offset":471}}}],"position":{"start":{"line":9,"column":93,"offset":462},"end":{"line":9,"column":131,"offset":500}}},{"type":"text","value":" in ","position":{"start":{"line":9,"column":131,"offset":500},"end":{"line":9,"column":135,"offset":504}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14291"},"children":[{"type":"text","value":"#14291","position":{"start":{"line":9,"column":136,"offset":505},"end":{"line":9,"column":142,"offset":511}}}],"position":{"start":{"line":9,"column":135,"offset":504},"end":{"line":9,"column":189,"offset":558}}},{"type":"text","value":")","position":{"start":{"line":9,"column":189,"offset":558},"end":{"line":9,"column":190,"offset":559}}}],"position":{"start":{"line":9,"column":1,"offset":370},"end":{"line":9,"column":191,"offset":560}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"4. Fix a performance regression in profiling mode. (","position":{"start":{"line":11,"column":5,"offset":566},"end":{"line":11,"column":57,"offset":618}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/bvaughn"},"children":[{"type":"text","value":"@bvaughn","position":{"start":{"line":11,"column":58,"offset":619},"end":{"line":11,"column":66,"offset":627}}}],"position":{"start":{"line":11,"column":57,"offset":618},"end":{"line":11,"column":95,"offset":656}}},{"type":"text","value":" in ","position":{"start":{"line":11,"column":95,"offset":656},"end":{"line":11,"column":99,"offset":660}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14383"},"children":[{"type":"text","value":"#14383","position":{"start":{"line":11,"column":100,"offset":661},"end":{"line":11,"column":106,"offset":667}}}],"position":{"start":{"line":11,"column":99,"offset":660},"end":{"line":11,"column":153,"offset":714}}},{"type":"text","value":")","position":{"start":{"line":11,"column":153,"offset":714},"end":{"line":11,"column":154,"offset":715}}}],"position":{"start":{"line":11,"column":1,"offset":562},"end":{"line":11,"column":154,"offset":715}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Scheduler","position":{"start":{"line":15,"column":4,"offset":722},"end":{"line":15,"column":13,"offset":731}}}],"position":{"start":{"line":15,"column":1,"offset":719},"end":{"line":15,"column":13,"offset":731}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"1. Post to MessageChannel instead of window. (","position":{"start":{"line":17,"column":5,"offset":737},"end":{"line":17,"column":51,"offset":783}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/acdlite"},"children":[{"type":"text","value":"@acdlite","position":{"start":{"line":17,"column":52,"offset":784},"end":{"line":17,"column":60,"offset":792}}}],"position":{"start":{"line":17,"column":51,"offset":783},"end":{"line":17,"column":89,"offset":821}}},{"type":"text","value":" in ","position":{"start":{"line":17,"column":89,"offset":821},"end":{"line":17,"column":93,"offset":825}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14234"},"children":[{"type":"text","value":"#14234","position":{"start":{"line":17,"column":94,"offset":826},"end":{"line":17,"column":100,"offset":832}}}],"position":{"start":{"line":17,"column":93,"offset":825},"end":{"line":17,"column":147,"offset":879}}},{"type":"text","value":")","position":{"start":{"line":17,"column":147,"offset":879},"end":{"line":17,"column":148,"offset":880}}}],"position":{"start":{"line":17,"column":1,"offset":733},"end":{"line":17,"column":148,"offset":880}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\tScheduler需要在paint之后触发一个task（会用window去postMessage），在队列为空之前每一帧都会发生都会触发。这会导致其他message event handler每一帧都会被调用，即使它们立即退出，这也会增加每帧的显着开销。所以改用MessageChannel","position":{"start":{"line":19,"column":1,"offset":882},"end":{"line":19,"column":148,"offset":1029}}}],"position":{"start":{"line":19,"column":1,"offset":882},"end":{"line":19,"column":148,"offset":1029}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> MessageChannel <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Use a MessageChannel, if support exists</span>\n    <span class=\"token keyword\">var</span> channel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MessageChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    channel<span class=\"token punctuation\">.</span>port1<span class=\"token punctuation\">.</span>onmessage <span class=\"token operator\">=</span> idleTick<span class=\"token punctuation\">;</span>\n    port <span class=\"token operator\">=</span> channel<span class=\"token punctuation\">.</span>port2<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> </code></pre></div>","position":{"start":{"line":21,"column":1,"offset":1031},"end":{"line":28,"column":4,"offset":1251}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2. Reduce serialization overhead. (","position":{"start":{"line":30,"column":5,"offset":1257},"end":{"line":30,"column":40,"offset":1292}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/developit"},"children":[{"type":"text","value":"@developit","position":{"start":{"line":30,"column":41,"offset":1293},"end":{"line":30,"column":51,"offset":1303}}}],"position":{"start":{"line":30,"column":40,"offset":1292},"end":{"line":30,"column":82,"offset":1334}}},{"type":"text","value":" in ","position":{"start":{"line":30,"column":82,"offset":1334},"end":{"line":30,"column":86,"offset":1338}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14249"},"children":[{"type":"text","value":"#14249","position":{"start":{"line":30,"column":87,"offset":1339},"end":{"line":30,"column":93,"offset":1345}}}],"position":{"start":{"line":30,"column":86,"offset":1338},"end":{"line":30,"column":140,"offset":1392}}},{"type":"text","value":")","position":{"start":{"line":30,"column":140,"offset":1392},"end":{"line":30,"column":141,"offset":1393}}}],"position":{"start":{"line":30,"column":1,"offset":1253},"end":{"line":30,"column":141,"offset":1393}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在切换到MessageChannel的过程中，还是传递了”*”。 这实际上最终会触发序列化。 为了节省一些性能，改用undefined，因为传递一个像0这样的数字仍然会产生序列化开销 ","position":{"start":{"line":32,"column":1,"offset":1395},"end":{"line":32,"column":93,"offset":1487}}}],"position":{"start":{"line":32,"column":1,"offset":1395},"end":{"line":32,"column":93,"offset":1487}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"具体可以看","position":{"start":{"line":34,"column":1,"offset":1489},"end":{"line":34,"column":6,"offset":1494}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://cs.chromium.org/chromium/src/third_party/blink/renderer/bindings/core/v8/script_value.h?type=cs&g=0&l=74"},"children":[{"type":"text","value":"https://cs.chromium.org/chromium/src/third","position":{"start":{"line":34,"column":7,"offset":1495},"end":{"line":34,"column":49,"offset":1537}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"party/blink/renderer/bindings/core/v8/script","position":{"start":{"line":34,"column":50,"offset":1538},"end":{"line":34,"column":94,"offset":1582}}}],"position":{"start":{"line":34,"column":49,"offset":1537},"end":{"line":34,"column":95,"offset":1583}}},{"type":"text","value":"value.h?type=cs&g=0&l=74","position":{"start":{"line":34,"column":95,"offset":1583},"end":{"line":34,"column":119,"offset":1607}}}],"position":{"start":{"line":34,"column":7,"offset":1495},"end":{"line":34,"column":119,"offset":1607}}}],"position":{"start":{"line":34,"column":6,"offset":1494},"end":{"line":34,"column":120,"offset":1608}}},{"type":"text","value":" ","position":{"start":{"line":34,"column":120,"offset":1608},"end":{"line":34,"column":121,"offset":1609}}}],"position":{"start":{"line":34,"column":1,"offset":1489},"end":{"line":34,"column":121,"offset":1609}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    -  port.postMessage(&#39;*&#39;);\n    +  port.postMessage(undefined);</code></pre></div>","position":{"start":{"line":36,"column":1,"offset":1611},"end":{"line":39,"column":4,"offset":1684}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"3. Fix fallback to ","position":{"start":{"line":41,"column":5,"offset":1690},"end":{"line":41,"column":24,"offset":1709}}},{"type":"raw","value":"<code class=\"language-text\">setTimeout</code>","position":{"start":{"line":41,"column":24,"offset":1709},"end":{"line":41,"column":36,"offset":1721}}},{"type":"text","value":" in testing environments. (","position":{"start":{"line":41,"column":36,"offset":1721},"end":{"line":41,"column":63,"offset":1748}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/bvaughn"},"children":[{"type":"text","value":"@bvaughn","position":{"start":{"line":41,"column":64,"offset":1749},"end":{"line":41,"column":72,"offset":1757}}}],"position":{"start":{"line":41,"column":63,"offset":1748},"end":{"line":41,"column":101,"offset":1786}}},{"type":"text","value":" in ","position":{"start":{"line":41,"column":101,"offset":1786},"end":{"line":41,"column":105,"offset":1790}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14358"},"children":[{"type":"text","value":"#14358","position":{"start":{"line":41,"column":106,"offset":1791},"end":{"line":41,"column":112,"offset":1797}}}],"position":{"start":{"line":41,"column":105,"offset":1790},"end":{"line":41,"column":159,"offset":1844}}},{"type":"text","value":")","position":{"start":{"line":41,"column":159,"offset":1844},"end":{"line":41,"column":160,"offset":1845}}}],"position":{"start":{"line":41,"column":1,"offset":1686},"end":{"line":41,"column":160,"offset":1845}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"4. Add methods for debugging. (","position":{"start":{"line":43,"column":5,"offset":1851},"end":{"line":43,"column":36,"offset":1882}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/mrkev"},"children":[{"type":"text","value":"@mrkev","position":{"start":{"line":43,"column":37,"offset":1883},"end":{"line":43,"column":43,"offset":1889}}}],"position":{"start":{"line":43,"column":36,"offset":1882},"end":{"line":43,"column":70,"offset":1916}}},{"type":"text","value":" in ","position":{"start":{"line":43,"column":70,"offset":1916},"end":{"line":43,"column":74,"offset":1920}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/facebook/react/pull/14053"},"children":[{"type":"text","value":"#14053","position":{"start":{"line":43,"column":75,"offset":1921},"end":{"line":43,"column":81,"offset":1927}}}],"position":{"start":{"line":43,"column":74,"offset":1920},"end":{"line":43,"column":128,"offset":1974}}},{"type":"text","value":")","position":{"start":{"line":43,"column":128,"offset":1974},"end":{"line":43,"column":129,"offset":1975}}}],"position":{"start":{"line":43,"column":1,"offset":1847},"end":{"line":43,"column":129,"offset":1975}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":44,"column":1,"offset":1976}}}}